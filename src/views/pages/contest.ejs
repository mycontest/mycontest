<!DOCTYPE html>
<html lang="en">
  <head>
    <title><%= contest.title %> - mycontest</title>
    <%- include("../basic/head.ejs") %>
  </head>
  <body>
    <%- include("../basic/navbar.ejs", { data: { user_id: user ? user.user_id : null, full_name: user ? (user.full_name || user.username) : null } }) %>

    <main class="container py-4" style="min-height: 70vh;">
      <div class="problem-shell p-3 mb-3">
        <div class="d-flex justify-content-between align-items-start">
          <div>
            <h3 class="fw-bold mb-1"><%= contest.title %></h3>
            <div class="text-muted small"><%= contest.description %></div>
          </div>
          <span class="badge <%= contest.status === 'active' ? 'bg-success' : contest.status === 'upcoming' ? 'bg-primary' : 'bg-secondary' %> text-capitalize">
            <%= contest.status %>
          </span>
        </div>
        <div class="text-muted small mt-2">
          <i class="fa fa-calendar-o me-1"></i><%= new Date(contest.start_time).toLocaleString() %> - <%= new Date(contest.end_time).toLocaleString() %>
        </div>
      </div>

      <div class="problem-shell p-3">
        <h6 class="fw-semibold mb-2">Problems</h6>
        <% contest.problems.forEach(problem => { %>
          <div class="d-flex justify-content-between align-items-center border-bottom py-2">
            <a href="/problems/<%= problem.problem_id %>" class="text-decoration-none"><%= problem.title %></a>
            <span class="badge bg-light text-dark border"><%= problem.difficulty %></span>
          </div>
        <% }) %>
      </div>
    </main>

    <%- include("../basic/footer.ejs") %>
  </body>
</html>
