<!DOCTYPE html>
<html lang="en">
  <head>
    <title><%= title %> - mycontest</title>
    <%- include("../basic/head.ejs") %>
  </head>
  <body>
    <%- include("../basic/navbar.ejs", { data: { user_id: user ? user.user_id : null, full_name: user ? (user.full_name || user.username) : null } }) %>

    <main class="container py-4" style="min-height: 70vh;">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
          <p class="text-primary fw-semibold small text-uppercase mb-1">Contests</p>
          <h2 class="fw-bold mb-0"><%= title %></h2>
        </div>
      </div>

      <% if (contests.length === 0) { %>
        <div class="problem-shell p-3 text-center text-muted mt-3">No contests available</div>
      <% } else { %>
        <div class="row g-3">
          <% contests.forEach(contest => { %>
            <div class="col-md-4">
              <a href="/contests/<%= contest.contest_id %>" class="problem-shell d-block p-3 text-decoration-none text-dark">
                <div class="d-flex justify-content-between align-items-start mb-2">
                  <h5 class="fw-semibold mb-0"><%= contest.title %></h5>
                  <span class="badge <%= contest.status === 'active' ? 'bg-success' : contest.status === 'upcoming' ? 'bg-primary' : 'bg-secondary' %> text-capitalize">
                    <%= contest.status %>
                  </span>
                </div>
                <div class="text-muted small d-flex flex-column gap-1">
                  <span><i class="fa fa-tasks me-1"></i><%= contest.problem_count %> problems</span>
                  <span><i class="fa fa-user-o me-1"></i><%= contest.creator_name %></span>
                  <span><i class="fa fa-calendar-o me-1"></i><%= new Date(contest.start_time).toLocaleDateString() %></span>
                </div>
              </a>
            </div>
          <% }) %>
        </div>
      <% } %>

      <div class="mt-3">
        <%- include("../partials/pagination") %>
      </div>
    </main>

    <%- include("../basic/footer.ejs") %>
  </body>
</html>
